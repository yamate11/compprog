







<!DOCTYPE html>
<html>
<head>
	<title>G - Mediator</title>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
	<meta http-equiv="Content-Language" content="en">
	<meta name="viewport" content="width=device-width,initial-scale=1.0">
	<meta name="format-detection" content="telephone=no">
	<meta name="google-site-verification" content="nXGC_JxO0yoP1qBzMnYD_xgufO6leSLw1kyNo2HZltM" />

	
	<script async src="https://www.googletagmanager.com/gtag/js?id=G-RC512FD18N"></script>
	<script>
		window.dataLayer = window.dataLayer || [];
		function gtag(){dataLayer.push(arguments);}
		gtag('js', new Date());

		gtag('config', 'G-RC512FD18N');
	</script>

	
	<meta name="description" content="AtCoder is a programming contest site for anyone from beginners to experts. We hold weekly programming contests online.">
	<meta name="author" content="AtCoder Inc.">

	<meta property="og:site_name" content="AtCoder">
	
	<meta property="og:title" content="G - Mediator" />
	<meta property="og:description" content="AtCoder is a programming contest site for anyone from beginners to experts. We hold weekly programming contests online." />
	<meta property="og:type" content="website" />
	<meta property="og:url" content="https://atcoder.jp/contests/abc350/tasks/abc350_g" />
	<meta property="og:image" content="https://img.atcoder.jp/assets/atcoder.png" />
	<meta name="twitter:card" content="summary" />
	<meta name="twitter:site" content="@atcoder" />
	
	<meta property="twitter:title" content="G - Mediator" />

	<link href="//fonts.googleapis.com/css?family=Lato:400,700" rel="stylesheet" type="text/css">
	<link rel="stylesheet" type="text/css" href="//img.atcoder.jp/public/2cd3344/css/bootstrap.min.css">
	<link rel="stylesheet" type="text/css" href="//img.atcoder.jp/public/2cd3344/css/base.css">
	<link rel="shortcut icon" type="image/png" href="//img.atcoder.jp/assets/favicon.png">
	<link rel="apple-touch-icon" href="//img.atcoder.jp/assets/atcoder.png">
	<script src="//img.atcoder.jp/public/2cd3344/js/lib/jquery-1.9.1.min.js"></script>
	<script src="//img.atcoder.jp/public/2cd3344/js/lib/bootstrap.min.js"></script>
	<script src="//img.atcoder.jp/public/2cd3344/js/cdn/js.cookie.min.js"></script>
	<script src="//img.atcoder.jp/public/2cd3344/js/cdn/moment.min.js"></script>
	<script src="//img.atcoder.jp/public/2cd3344/js/cdn/moment_js-ja.js"></script>
	<script>
		var LANG = "en";
		var userScreenName = "yamate11";
		var csrfToken = "3XEPBu3Qif2jSp+T9OtcVOMAAt+RHcLD3KHJ0BWVvAw="
	</script>
	<script src="//img.atcoder.jp/public/2cd3344/js/utils.js"></script>
	
	
		<script src="//img.atcoder.jp/public/2cd3344/js/contest.js"></script>
		<link href="//img.atcoder.jp/public/2cd3344/css/contest.css" rel="stylesheet" />
		<script>
			var contestScreenName = "abc350";
			var remainingText = "Remaining Time";
			var countDownText = "Contest begins in";
			var startTime = moment("2024-04-20T21:00:00+09:00");
			var endTime = moment("2024-04-20T22:40:00+09:00");
		</script>
		<style></style>
	
	
		<link href="//img.atcoder.jp/public/2cd3344/css/cdn/select2.min.css" rel="stylesheet" />
		<link href="//img.atcoder.jp/public/2cd3344/css/cdn/select2-bootstrap.min.css" rel="stylesheet" />
		<script src="//img.atcoder.jp/public/2cd3344/js/lib/select2.min.js"></script>
	
	
		<script src="//img.atcoder.jp/public/2cd3344/js/ace/ace.js"></script>
		<script src="//img.atcoder.jp/public/2cd3344/js/ace/ext-language_tools.js"></script>
	
	
		<script src="//img.atcoder.jp/public/2cd3344/js/cdn/run_prettify.js"></script>
	
	
		<link rel="stylesheet" href="//img.atcoder.jp/public/2cd3344/css/cdn/katex.min.css">
		<script defer src="//img.atcoder.jp/public/2cd3344/js/cdn/katex.min.js"></script>
		<script defer src="//img.atcoder.jp/public/2cd3344/js/cdn/auto-render.min.js"></script>
		<script>$(function(){$('var').each(function(){var html=$(this).html().replace(/<sub>/g,'_{').replace(/<\/sub>/g,'}');$(this).html('\\('+html+'\\)');});});</script>
		<script>
			var katexOptions = {
				delimiters: [
					{left: "$$", right: "$$", display: true},
					
					{left: "\\(", right: "\\)", display: false},
					{left: "\\[", right: "\\]", display: true}
				],
      	ignoredTags: ["script", "noscript", "style", "textarea", "code", "option"],
				ignoredClasses: ["prettyprint", "source-code-for-copy"],
				throwOnError: false
			};
			document.addEventListener("DOMContentLoaded", function() { renderMathInElement(document.body, katexOptions);});
		</script>
	
	
	
	
	
	
	
	
	
	<script src="//img.atcoder.jp/public/2cd3344/js/base.js"></script>
</head>

<body>

<script type="text/javascript">
	var __pParams = __pParams || [];
	__pParams.push({client_id: '468', c_1: 'atcodercontest', c_2: 'ClientSite'});
</script>
<script type="text/javascript" src="https://cdn.d2-apps.net/js/tr.js" async></script>


<div id="modal-contest-start" class="modal fade" tabindex="-1" role="dialog">
	<div class="modal-dialog" role="document">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
				<h4 class="modal-title">Contest started</h4>
			</div>
			<div class="modal-body">
				<p>AtCoder Beginner Contest 350 has begun.</p>
			</div>
			<div class="modal-footer">
				
					<a class="btn btn-primary" href='/contests/abc350/tasks'>Go to the task list page</a>
				
			</div>
		</div>
	</div>
</div>
<div id="modal-contest-end" class="modal fade" tabindex="-1" role="dialog">
	<div class="modal-dialog" role="document">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
				<h4 class="modal-title">Contest is over</h4>
			</div>
			<div class="modal-body">
				<p>AtCoder Beginner Contest 350 has ended.</p>
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
			</div>
		</div>
	</div>
</div>
<div id="main-div" class="float-container">


	<nav class="navbar navbar-inverse navbar-fixed-top">
		<div class="container-fluid">
			<div class="navbar-header">
				<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-collapse" aria-expanded="false">
					<span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span>
				</button>
				<a class="navbar-brand" href="/home"></a>
			</div>
			<div class="collapse navbar-collapse" id="navbar-collapse">
				<ul class="nav navbar-nav">
				
					<li><a class="contest-title" href="/contests/abc350">AtCoder Beginner Contest 350</a></li>
				
				</ul>
				<ul class="nav navbar-nav navbar-right">
					
					<li class="dropdown">
						<a class="dropdown-toggle" data-toggle="dropdown" href="#" role="button" aria-haspopup="true" aria-expanded="false">
							<img src='//img.atcoder.jp/assets/top/img/flag-lang/en.png'> English <span class="caret"></span>
						</a>
						<ul class="dropdown-menu">
							<li><a href="/contests/abc350/tasks/abc350_g?lang=ja"><img src='//img.atcoder.jp/assets/top/img/flag-lang/ja.png'> 日本語</a></li>
							<li><a href="/contests/abc350/tasks/abc350_g?lang=en"><img src='//img.atcoder.jp/assets/top/img/flag-lang/en.png'> English</a></li>
						</ul>
					</li>
					
					
						<li class="dropdown">
							<a class="dropdown-toggle" data-toggle="dropdown" href="#" role="button" aria-haspopup="true" aria-expanded="false">
								<span class="glyphicon glyphicon-cog" aria-hidden="true"></span> yamate11 (Contestant) <span class="caret"></span>
							</a>
							<ul class="dropdown-menu">
								<li><a href="/users/yamate11"><span class="glyphicon glyphicon-user" aria-hidden="true"></span> My Profile</a></li>
								<li class="divider"></li>
								<li><a href="/settings"><span class="glyphicon glyphicon-wrench" aria-hidden="true"></span> General Settings</a></li>
								<li><a href="/settings/icon"><span class="glyphicon glyphicon-picture" aria-hidden="true"></span> Change Photo</a></li>
								<li><a href="/settings/password"><span class="glyphicon glyphicon-lock" aria-hidden="true"></span> Change Password</a></li>
								<li><a href="/settings/fav"><span class="glyphicon glyphicon-star" aria-hidden="true"></span> Manage Fav</a></li>
								
								
								
								<li class="divider"></li>
								<li><a href="javascript:void(form_logout.submit())"><span class="glyphicon glyphicon-log-out" aria-hidden="true"></span> Sign Out</a></li>
							</ul>
						</li>
					
				</ul>
			</div>
		</div>
	</nav>

	<form method="POST" name="form_logout" action="/logout?continue=https%3A%2F%2Fatcoder.jp%2Fcontests%2Fabc350%2Ftasks%2Fabc350_g">
		<input type="hidden" name="csrf_token" value="3XEPBu3Qif2jSp&#43;T9OtcVOMAAt&#43;RHcLD3KHJ0BWVvAw=" />
	</form>
	<div id="main-container" class="container"
		 	style="padding-top:50px;">
		


<div class="row">
	<div id="contest-nav-tabs" class="col-sm-12 mb-2 cnvtb-fixed">
	<div>
		<small class="contest-duration">
			
				Contest Duration:
				<a href='http://www.timeanddate.com/worldclock/fixedtime.html?iso=20240420T2100&p1=248' target='blank'><time class='fixtime fixtime-full'>2024-04-20 21:00:00+0900</time></a> - <a href='http://www.timeanddate.com/worldclock/fixedtime.html?iso=20240420T2240&p1=248' target='blank'><time class='fixtime fixtime-full'>2024-04-20 22:40:00+0900</time></a> (local time)
				(100 minutes)
			
		</small>
		<small class="back-to-home pull-right"><a href="/home">Back to Home</a></small>
	</div>
	<ul class="nav nav-tabs">
		<li><a href="/contests/abc350"><span class="glyphicon glyphicon-home" aria-hidden="true"></span> Top</a></li>
		
			<li class="active"><a href="/contests/abc350/tasks"><span class="glyphicon glyphicon-tasks" aria-hidden="true"></span> Tasks</a></li>
		

		
			<li><a href="/contests/abc350/clarifications"><span class="glyphicon glyphicon-question-sign" aria-hidden="true"></span> Clarifications <span id="clar-badge" class="badge"></span></a></li>
		

		
			<li><a href="/contests/abc350/submit?taskScreenName=abc350_g"><span class="glyphicon glyphicon-send" aria-hidden="true"></span> Submit</a></li>
		

		
			<li>
				<a class="dropdown-toggle" data-toggle="dropdown" href="#" role="button" aria-haspopup="true" aria-expanded="false"><span class="glyphicon glyphicon-list" aria-hidden="true"></span> Results<span class="caret"></span></a>
				<ul class="dropdown-menu">
					
					
						<li><a href="/contests/abc350/submissions/me"><span class="glyphicon glyphicon-user" aria-hidden="true"></span> My Submissions</a></li>
						
						<li class="divider"></li>
						<li><a href="/contests/abc350/score"><span class="glyphicon glyphicon-dashboard" aria-hidden="true"></span> My Score</a></li>
					
				</ul>
			</li>
		

		
			
				
					<li><a href="/contests/abc350/standings"><span class="glyphicon glyphicon-sort-by-attributes-alt" aria-hidden="true"></span> Standings</a></li>
				
			
		

		
			<li><a href="/contests/abc350/custom_test"><span class="glyphicon glyphicon-wrench" aria-hidden="true"></span> Custom Test</a></li>
		

		
		
			
			
				<li><a href="https://codeforces.com/blog/entry/128633" target="_blank" rel="noopener"><span class="glyphicon glyphicon-comment" aria-hidden="true"></span> Discuss</a></li>
			
		

		<li class="pull-right"><a id="fix-cnvtb" href="javascript:void(0)"><span class="glyphicon glyphicon-pushpin" aria-hidden="true"></span></a></li>
	</ul>
</div>
	<div class="col-sm-12">
		<span class="h2">
			G - Mediator
			
		</span>
		<span id="task-lang-btn" class="pull-right"><span data-lang="ja"><img src='//img.atcoder.jp/assets/top/img/flag-lang/ja.png'></span> / <span data-lang="en"><img src='//img.atcoder.jp/assets/top/img/flag-lang/en.png'></span></span>
		<script>
			$(function() {
				var ts = $('#task-statement span.lang');
				if (ts.children('span').size() <= 1) {
					$('#task-lang-btn').hide();
					ts.children('span').show();
					return;
				}
				var REMEMBER_LB = 5;
				var LS_KEY = 'task_lang';
				var taskLang = getLS(LS_KEY) || '';
				var changeTimes = 0;
				if (taskLang == 'ja' || taskLang == 'en') {
					changeTimes = REMEMBER_LB;
				} else {
					var changeTimes = parseInt(taskLang, 10);
					if (isNaN(changeTimes)) {
						changeTimes = 0;
						delLS(LS_KEY);
					}
					changeTimes++;
					taskLang = LANG;
				}
				ts.children('span.lang-' + taskLang).show();

				$('#task-lang-btn span').click(function() {
					var l = $(this).data('lang');
					ts.children('span').hide();
					ts.children('span.lang-' + l).show();
					if (changeTimes < REMEMBER_LB) setLS(LS_KEY, changeTimes);
					else setLS(LS_KEY, l);
				});
			});
		</script>
		<hr/>
		<p>
			Time Limit: 3 sec / Memory Limit: 256 MB
			
			
		</p>

		<div id="task-statement">
			
			<span class="lang">
<span class="lang-ja">
<p>配点 : <var>600</var> 点</p>

<div class="part">
<section>
<h3>問題文</h3><p><strong>特殊な入力形式に注意してください。 また、メモリ制限が通常より小さいことに注意してください。</strong></p>
<p>頂点 <var>1,2,\dots,N</var> の <var>N</var> 頂点からなる無向グラフがあり、最初辺はありません。<br />
このグラフに対して、以下の <var>Q</var> 個のクエリを処理してください。  </p>
<p><br></p>
<pre>1 <var>u</var> <var>v</var>
</pre>
<p>タイプ <var>1</var> : 頂点 <var>u</var> と頂点 <var>v</var> との間に辺を追加する。<br />
辺を追加する前の時点で、 <var>u</var> と <var>v</var> は異なる連結成分に属する。(すなわち、グラフは常に森である。)</p>
<p><br></p>
<pre>2 <var>u</var> <var>v</var>
</pre>
<p>タイプ <var>2</var> : 頂点 <var>u</var> と頂点 <var>v</var> の双方に隣接する頂点があるならその番号を答え、無ければ <var>0</var> と答える。<br />
グラフが常に森であることから、このクエリに対する解答は一意に定まることが示せる。</p>
<p><br></p>
<p>但し、上記のクエリは暗号化して与えられます。<br />
本来のクエリは <var>3</var> つの整数 <var>A,B,C</var> として定義され、これをもとに暗号化されたクエリが <var>3</var> つの整数 <var>a,b,c</var> として与えられます。<br />
タイプ <var>2</var> のクエリのうち、先頭から <var>k</var> 個目のものに対する解答を <var>X_k</var> とします。 さらに、 <var>k = 0</var> に対して <var>X_k = 0</var> と定義します。<br />
与えられた <var>a,b,c</var> から以下の通りに <var>A,B,C</var> を復号してください。  </p>
<ul>
<li>そのクエリより前に与えられたタイプ <var>2</var> のクエリの個数を <var>l</var> とする(そのクエリ自身は数えない)。このとき、以下の通りに復号せよ。<ul>
<li><var>A = 1 + (((a \times (1+X_l)) \mod 998244353) \mod 2)</var></li>
<li><var>B = 1 + (((b \times (1+X_l)) \mod 998244353) \mod N)</var></li>
<li><var>C = 1 + (((c \times (1+X_l)) \mod 998244353) \mod N)</var></li>
</ul>
</li>
</ul>
</section>
</div>

<div class="part">
<section>
<h3>制約</h3><ul>
<li>入力は全て整数</li>
<li><var>2 \le N \le 10^5</var></li>
<li><var>1 \le Q \le 10^5</var></li>
<li><var>1 \le u &lt; v \le N</var></li>
<li><var>0 \le a,b,c &lt; 998244353</var></li>
</ul>
</section>
</div>

<hr />
<div class="io-style">
<div class="part">
<section>
<h3>入力</h3><p>入力は以下の形式で標準入力から与えられる。<br />
但し、 <var>\rm{Query}</var><var>_i</var> は <var>i</var> 個目のクエリを表す。</p>
<pre><var>N</var> <var>Q</var>
<var>\rm{Query}</var><var>_1</var>
<var>\rm{Query}</var><var>_2</var>
<var>\vdots</var>
<var>\rm{Query}</var><var>_Q</var>
</pre>
</section>
</div>

<div class="part">
<section>
<h3>出力</h3><p>タイプ <var>2</var> のクエリの個数を <var>k</var> としたとき、全体で <var>k</var> 行出力せよ。<br />
そのうち <var>i</var> 行目には、タイプ <var>2</var> のクエリのうち、先頭から <var>i</var> 個目のものに対する解答を出力せよ。</p>
</section>
</div>
</div>

<hr />
<div class="part">
<section>
<h3>入力例 1</h3><pre>6 12
143209915 123840720 97293110
89822758 207184717 689046893
67757230 270920641 26993265
952858464 221010240 871605818
730183361 147726243 445163345
963432357 295317852 195433903
120904472 106195318 615645575
817920568 27584394 770578609
38727673 250957656 506822697
139174867 566158852 412971999
205467538 606353836 855642999
159292205 319166257 51234344
</pre>
</section>
</div>

<div class="part">
<section>
<h3>出力例 1</h3><pre>0
2
0
2
6
0
1
</pre>
<p>全てのクエリを復号した後の入力は以下の通りです。</p>
<pre>6 12
2 1 3
1 2 6
1 2 4
1 1 3
2 4 6
2 1 4
1 5 6
1 1 2
2 1 4
2 2 5
2 3 4
2 2 3
</pre>
<p>この入力について、グラフは <var>6</var> 頂点であり、 <var>12</var> 個のクエリが含まれます。</p>
<ul>
<li><var>1</var> 個目のクエリは <code>2 1 3</code> である。<ul>
<li>頂点 <var>1</var> と頂点 <var>3</var> の双方に隣接する頂点はないので、 <var>0</var> と答える。</li>
</ul>
</li>
<li><var>2</var> 個目のクエリは <code>1 2 6</code> である。<ul>
<li>頂点 <var>2</var> と頂点 <var>6</var> との間に辺を追加する。</li>
</ul>
</li>
<li><var>3</var> 個目のクエリは <code>1 2 4</code> である。<ul>
<li>頂点 <var>2</var> と頂点 <var>4</var> との間に辺を追加する。</li>
</ul>
</li>
<li><var>4</var> 個目のクエリは <code>1 1 3</code> である。<ul>
<li>頂点 <var>1</var> と頂点 <var>3</var> との間に辺を追加する。</li>
</ul>
</li>
<li><var>5</var> 個目のクエリは <code>2 4 6</code> である。<ul>
<li>頂点 <var>4</var> と頂点 <var>6</var> の双方に隣接する頂点は、頂点 <var>2</var> である。</li>
</ul>
</li>
<li><var>6</var> 個目のクエリは <code>2 1 4</code> である。<ul>
<li>頂点 <var>1</var> と頂点 <var>4</var> の双方に隣接する頂点はないので、 <var>0</var> と答える。</li>
</ul>
</li>
<li><var>7</var> 個目のクエリは <code>1 5 6</code> である。<ul>
<li>頂点 <var>5</var> と頂点 <var>6</var> との間に辺を追加する。</li>
</ul>
</li>
<li><var>8</var> 個目のクエリは <code>1 1 2</code> である。<ul>
<li>頂点 <var>1</var> と頂点 <var>2</var> との間に辺を追加する。</li>
</ul>
</li>
<li><var>9</var> 個目のクエリは <code>2 1 4</code> である。<ul>
<li>頂点 <var>1</var> と頂点 <var>4</var> の双方に隣接する頂点は、頂点 <var>2</var> である。</li>
</ul>
</li>
<li><var>10</var> 個目のクエリは <code>2 2 5</code> である。<ul>
<li>頂点 <var>2</var> と頂点 <var>5</var> の双方に隣接する頂点は、頂点 <var>6</var> である。</li>
</ul>
</li>
<li><var>11</var> 個目のクエリは <code>2 3 4</code> である。<ul>
<li>頂点 <var>3</var> と頂点 <var>4</var> の双方に隣接する頂点はないので、 <var>0</var> と答える。</li>
</ul>
</li>
<li><var>12</var> 個目のクエリは <code>2 2 3</code> である。<ul>
<li>頂点 <var>2</var> と頂点 <var>3</var> の双方に隣接する頂点は、頂点 <var>1</var> である。</li>
</ul>
</li>
</ul>
</section>
</div>

<hr />
<div class="part">
<section>
<h3>入力例 2</h3><pre>2 1
377373366 41280240 33617925
</pre>
</section>
</div>

<div class="part">
<section>
<h3>出力例 2</h3><pre></pre>
<p>出力が空である場合もあります。</p></section>
</div>
</span>
<span class="lang-en">
<p>Score: <var>600</var> points</p>

<div class="part">
<section>
<h3>Problem Statement</h3><p><strong>Beware the special input format and the smaller memory limit than usual.</strong></p>
<p>There is an undirected graph with vertices <var>1, 2, \dots, N</var>, initially without edges.<br />
You need to process the following <var>Q</var> queries on this graph:</p>
<p><br></p>
<pre>1 <var>u</var> <var>v</var>
</pre>
<p>Type <var>1</var>: Add an edge between vertices <var>u</var> and <var>v</var>.<br />
Before adding the edge, <var>u</var> and <var>v</var> belong to different connected components (i.e., the graph always remains a forest).</p>
<p><br></p>
<pre>2 <var>u</var> <var>v</var>
</pre>
<p>Type <var>2</var>: If there is a vertex adjacent to both <var>u</var> and <var>v</var>, report its vertex number; otherwise, report <var>0</var>.<br />
Given that the graph always remains a forest, the answer to this query is uniquely determined.</p>
<p><br></p>
<p>The queries are given in an encrypted form.<br />
The original query is defined by three integers <var>A, B, C</var>, and the encrypted query is given as three integers <var>a, b, c</var>.<br />
Let <var>X_k</var> be the answer to the <var>k</var>-th type-<var>2</var> query. Define <var>X_k = 0</var> for <var>k = 0</var>.<br />
Restore <var>A, B, C</var> from the given <var>a, b, c</var> as follows:</p>
<ul>
<li>Let <var>l</var> be the number of type-<var>2</var> queries given before this query (not counting the query itself). Then, use the following:<ul>
<li><var>A = 1 + (((a \times (1+X_l)) \mod 998244353) \mod 2)</var></li>
<li><var>B = 1 + (((b \times (1+X_l)) \mod 998244353) \mod N)</var></li>
<li><var>C = 1 + (((c \times (1+X_l)) \mod 998244353) \mod N)</var></li>
</ul>
</li>
</ul>
</section>
</div>

<div class="part">
<section>
<h3>Constraints</h3><ul>
<li>All input values are integers.</li>
<li><var>2 \le N \le 10^5</var></li>
<li><var>1 \le Q \le 10^5</var></li>
<li><var>1 \le u &lt; v \le N</var></li>
<li><var>0 \le a,b,c &lt; 998244353</var></li>
</ul>
</section>
</div>

<hr />
<div class="io-style">
<div class="part">
<section>
<h3>Input</h3><p>The input is given from Standard Input in the following format:</p>
<pre><var>N</var> <var>Q</var>
<var>\rm{Query}</var><var>_1</var>
<var>\rm{Query}</var><var>_2</var>
<var>\vdots</var>
<var>\rm{Query}</var><var>_Q</var>
</pre>
</section>
</div>

<div class="part">
<section>
<h3>Output</h3><p>Let <var>k</var> be the number of type-<var>2</var> queries. Print <var>k</var> lines.<br />
The <var>i</var>-th line should contain the answer to the <var>i</var>-th type-<var>2</var> query.</p>
</section>
</div>
</div>

<hr />
<div class="part">
<section>
<h3>Sample Input 1</h3><pre>6 12
143209915 123840720 97293110
89822758 207184717 689046893
67757230 270920641 26993265
952858464 221010240 871605818
730183361 147726243 445163345
963432357 295317852 195433903
120904472 106195318 615645575
817920568 27584394 770578609
38727673 250957656 506822697
139174867 566158852 412971999
205467538 606353836 855642999
159292205 319166257 51234344
</pre>
</section>
</div>

<div class="part">
<section>
<h3>Sample Output 1</h3><pre>0
2
0
2
6
0
1
</pre>
<p>After decrypting all queries, the input is as follows:</p>
<pre>6 12
2 1 3
1 2 6
1 2 4
1 1 3
2 4 6
2 1 4
1 5 6
1 1 2
2 1 4
2 2 5
2 3 4
2 2 3
</pre>
<p>This input has a <var>6</var>-vertex graph and <var>12</var> queries.</p>
<ul>
<li>The first query is <code>2 1 3</code>.<ul>
<li>No vertex is adjacent to both vertex <var>1</var> and vertex <var>3</var>, so report <var>0</var>.</li>
</ul>
</li>
<li>The second query is <code>1 2 6</code>.<ul>
<li>Add an edge between vertices <var>2</var> and <var>6</var>.</li>
</ul>
</li>
<li>The third query is <code>1 2 4</code>.<ul>
<li>Add an edge between vertices <var>2</var> and <var>4</var>.</li>
</ul>
</li>
<li>The fourth query is <code>1 1 3</code>.<ul>
<li>Add an edge between vertices <var>1</var> and <var>3</var>.</li>
</ul>
</li>
<li>The fifth query is <code>2 4 6</code>.<ul>
<li>The vertex adjacent to both vertices <var>4</var> and <var>6</var> is vertex <var>2</var>.</li>
</ul>
</li>
<li>The sixth query is <code>2 1 4</code>.<ul>
<li>No vertex is adjacent to both vertices <var>1</var> and <var>4</var>, so report <var>0</var>.</li>
</ul>
</li>
<li>The seventh query is <code>1 5 6</code>.<ul>
<li>Add an edge between vertices <var>5</var> and <var>6</var>.</li>
</ul>
</li>
<li>The eighth query is <code>1 1 2</code>.<ul>
<li>Add an edge between vertices <var>1</var> and <var>2</var>.</li>
</ul>
</li>
<li>The ninth query is <code>2 1 4</code>.<ul>
<li>The vertex adjacent to both vertices <var>1</var> and <var>4</var> is vertex <var>2</var>.</li>
</ul>
</li>
<li>The tenth query is <code>2 2 5</code>.<ul>
<li>The vertex adjacent to both vertices <var>2</var> and <var>5</var> is vertex <var>6</var>.</li>
</ul>
</li>
<li>The eleventh query is <code>2 3 4</code>.<ul>
<li>No vertex is adjacent to both vertices <var>3</var> and <var>4</var>, so report <var>0</var>.</li>
</ul>
</li>
<li>The twelfth query is <code>2 2 3</code>.<ul>
<li>The vertex adjacent to both vertices <var>2</var> and <var>3</var> is vertex <var>1</var>.</li>
</ul>
</li>
</ul>
</section>
</div>

<hr />
<div class="part">
<section>
<h3>Sample Input 2</h3><pre>2 1
377373366 41280240 33617925
</pre>
</section>
</div>

<div class="part">
<section>
<h3>Sample Output 2</h3><pre></pre>
<p>The output may be empty.</p></section>
</div>
</span>
</span>

		</div>

		

		
		<hr/>
		<form class="form-horizontal form-code-submit" action="/contests/abc350/submit" method="POST">
			<input type="hidden" name="data.TaskScreenName" value="abc350_g" />
			
			<div class="form-group ">
				<label class="control-label col-sm-3 col-md-2" for="select-lang">Language</label>
				<div id="select-lang" class="col-sm-5" data-name="data.LanguageId">
					<select class="form-control current" data-placeholder="-" name="data.LanguageId" required>
						<option></option>
						
							<option value="5001" data-ace-mode="c_cpp">C&#43;&#43; 20 (gcc 12.2)</option>
						
							<option value="5002" data-ace-mode="golang">Go (go 1.20.6)</option>
						
							<option value="5003" data-ace-mode="csharp">C# 11.0 (.NET 7.0.7)</option>
						
							<option value="5004" data-ace-mode="kotlin">Kotlin (Kotlin/JVM 1.8.20)</option>
						
							<option value="5005" data-ace-mode="java">Java (OpenJDK 17)</option>
						
							<option value="5006" data-ace-mode="nim">Nim (Nim 1.6.14)</option>
						
							<option value="5007" data-ace-mode="text">V (V 0.4)</option>
						
							<option value="5008" data-ace-mode="text">Zig (Zig 0.10.1)</option>
						
							<option value="5009" data-ace-mode="javascript">JavaScript (Node.js 18.16.1)</option>
						
							<option value="5010" data-ace-mode="javascript">JavaScript (Deno 1.35.1)</option>
						
							<option value="5011" data-ace-mode="r">R (GNU R 4.2.1)</option>
						
							<option value="5012" data-ace-mode="d">D (DMD 2.104.0)</option>
						
							<option value="5013" data-ace-mode="d">D (LDC 1.32.2)</option>
						
							<option value="5014" data-ace-mode="swift">Swift (swift 5.8.1)</option>
						
							<option value="5015" data-ace-mode="dart">Dart (Dart 3.0.5)</option>
						
							<option value="5016" data-ace-mode="php">PHP (php 8.2.8)</option>
						
							<option value="5017" data-ace-mode="c_cpp">C (gcc 12.2.0)</option>
						
							<option value="5018" data-ace-mode="ruby">Ruby (ruby 3.2.2)</option>
						
							<option value="5019" data-ace-mode="crystal">Crystal (Crystal 1.9.1)</option>
						
							<option value="5020" data-ace-mode="text">Brainfuck (bf 20041219)</option>
						
							<option value="5021" data-ace-mode="fsharp">F# 7.0 (.NET 7.0.7)</option>
						
							<option value="5022" data-ace-mode="julia">Julia (Julia 1.9.2)</option>
						
							<option value="5023" data-ace-mode="sh">Bash (bash 5.2.2)</option>
						
							<option value="5024" data-ace-mode="text">Text (cat 8.32)</option>
						
							<option value="5025" data-ace-mode="haskell">Haskell (GHC 9.4.5)</option>
						
							<option value="5026" data-ace-mode="fortran">Fortran (gfortran 12.2)</option>
						
							<option value="5027" data-ace-mode="lua">Lua (LuaJIT 2.1.0-beta3)</option>
						
							<option value="5028" data-ace-mode="c_cpp">C&#43;&#43; 23 (gcc 12.2)</option>
						
							<option value="5029" data-ace-mode="lisp">Common Lisp (SBCL 2.3.6)</option>
						
							<option value="5030" data-ace-mode="cobol">COBOL (Free) (GnuCOBOL 3.1.2)</option>
						
							<option value="5031" data-ace-mode="c_cpp">C&#43;&#43; 23 (Clang 16.0.6)</option>
						
							<option value="5032" data-ace-mode="sh">Zsh (Zsh 5.9)</option>
						
							<option value="5033" data-ace-mode="python">SageMath (SageMath 9.5)</option>
						
							<option value="5034" data-ace-mode="sh">Sed (GNU sed 4.8)</option>
						
							<option value="5035" data-ace-mode="text">bc (bc 1.07.1)</option>
						
							<option value="5036" data-ace-mode="text">dc (dc 1.07.1)</option>
						
							<option value="5037" data-ace-mode="perl">Perl (perl  5.34)</option>
						
							<option value="5038" data-ace-mode="sh">AWK (GNU Awk 5.0.1)</option>
						
							<option value="5039" data-ace-mode="text">なでしこ (cnako3 3.4.20)</option>
						
							<option value="5040" data-ace-mode="text">Assembly x64 (NASM 2.15.05)</option>
						
							<option value="5041" data-ace-mode="pascal">Pascal (fpc 3.2.2)</option>
						
							<option value="5042" data-ace-mode="csharp">C# 11.0 AOT (.NET 7.0.7)</option>
						
							<option value="5043" data-ace-mode="lua">Lua (Lua 5.4.6)</option>
						
							<option value="5044" data-ace-mode="prolog">Prolog (SWI-Prolog 9.0.4)</option>
						
							<option value="5045" data-ace-mode="sh">PowerShell (PowerShell 7.3.1)</option>
						
							<option value="5046" data-ace-mode="scheme">Scheme (Gauche 0.9.12)</option>
						
							<option value="5047" data-ace-mode="scala">Scala 3.3.0 (Scala Native 0.4.14)</option>
						
							<option value="5048" data-ace-mode="vbscript">Visual Basic 16.9 (.NET 7.0.7)</option>
						
							<option value="5049" data-ace-mode="text">Forth (gforth 0.7.3)</option>
						
							<option value="5050" data-ace-mode="clojure">Clojure (babashka 1.3.181)</option>
						
							<option value="5051" data-ace-mode="erlang">Erlang (Erlang 26.0.2)</option>
						
							<option value="5052" data-ace-mode="typescript">TypeScript 5.1 (Deno 1.35.1)</option>
						
							<option value="5053" data-ace-mode="c_cpp">C&#43;&#43; 17 (gcc 12.2)</option>
						
							<option value="5054" data-ace-mode="rust">Rust (rustc 1.70.0)</option>
						
							<option value="5055" data-ace-mode="python">Python (CPython 3.11.4)</option>
						
							<option value="5056" data-ace-mode="scala">Scala (Dotty 3.3.0)</option>
						
							<option value="5057" data-ace-mode="text">Koka (koka 2.4.0)</option>
						
							<option value="5058" data-ace-mode="typescript">TypeScript 5.1 (Node.js 18.16.1)</option>
						
							<option value="5059" data-ace-mode="ocaml">OCaml (ocamlopt 5.0.0)</option>
						
							<option value="5060" data-ace-mode="raku">Raku (Rakudo 2023.06)</option>
						
							<option value="5061" data-ace-mode="text">Vim (vim 9.0.0242)</option>
						
							<option value="5062" data-ace-mode="lisp">Emacs Lisp (Native Compile) (GNU Emacs 28.2)</option>
						
							<option value="5063" data-ace-mode="python">Python (Mambaforge / CPython 3.10.10)</option>
						
							<option value="5064" data-ace-mode="clojure">Clojure (clojure 1.11.1)</option>
						
							<option value="5065" data-ace-mode="text">プロデル (mono版プロデル 1.9.1182)</option>
						
							<option value="5066" data-ace-mode="text">ECLiPSe (ECLiPSe 7.1_13)</option>
						
							<option value="5067" data-ace-mode="text">Nibbles (literate form) (nibbles 1.01)</option>
						
							<option value="5068" data-ace-mode="ada">Ada (GNAT 12.2)</option>
						
							<option value="5069" data-ace-mode="text">jq (jq 1.6)</option>
						
							<option value="5070" data-ace-mode="text">Cyber (Cyber v0.2-Latest)</option>
						
							<option value="5071" data-ace-mode="clojure">Carp (Carp 0.5.5)</option>
						
							<option value="5072" data-ace-mode="c_cpp">C&#43;&#43; 17 (Clang 16.0.6)</option>
						
							<option value="5073" data-ace-mode="c_cpp">C&#43;&#43; 20 (Clang 16.0.6)</option>
						
							<option value="5074" data-ace-mode="text">LLVM IR (Clang 16.0.6)</option>
						
							<option value="5075" data-ace-mode="lisp">Emacs Lisp (Byte Compile) (GNU Emacs 28.2)</option>
						
							<option value="5076" data-ace-mode="text">Factor (Factor 0.98)</option>
						
							<option value="5077" data-ace-mode="d">D (GDC 12.2)</option>
						
							<option value="5078" data-ace-mode="python">Python (PyPy 3.10-v7.3.12)</option>
						
							<option value="5079" data-ace-mode="text">Whitespace (whitespacers 1.0.0)</option>
						
							<option value="5080" data-ace-mode="text">&gt;&lt;&gt; (fishr 0.1.0)</option>
						
							<option value="5081" data-ace-mode="ocaml">ReasonML (reason 3.9.0)</option>
						
							<option value="5082" data-ace-mode="python">Python (Cython 0.29.34)</option>
						
							<option value="5083" data-ace-mode="matlab">Octave (GNU Octave 8.2.0)</option>
						
							<option value="5084" data-ace-mode="haxe">Haxe (JVM) (Haxe 4.3.1)</option>
						
							<option value="5085" data-ace-mode="elixir">Elixir (Elixir 1.15.2)</option>
						
							<option value="5086" data-ace-mode="text">Mercury (Mercury 22.01.6)</option>
						
							<option value="5087" data-ace-mode="text">Seed7 (Seed7 3.2.1)</option>
						
							<option value="5088" data-ace-mode="lisp">Emacs Lisp (No Compile) (GNU Emacs 28.2)</option>
						
							<option value="5089" data-ace-mode="text">Unison (Unison M5b)</option>
						
							<option value="5090" data-ace-mode="cobol">COBOL (GnuCOBOL(Fixed) 3.1.2)</option>
						
					</select>
					<span class="error"></span>
				</div>
			</div>
			<script>var currentLang = getLS('defaultLang');</script>
			
			
<div class="form-group">
	<div class="col-sm-3 col-md-2 editor-label">
		<label class="control-label" for="sourceCode">Source Code</label>
		<div class="editor-buttons">
			<button id="btn-open-file" type="button" class="btn btn-default btn-sm">
				<span class="glyphicon glyphicon-folder-open" aria-hidden="true"></span> &nbsp; Open File
			</button>
			<button id="btn-customize" type="button" class="btn btn-default btn-sm">
				<span class="glyphicon glyphicon-cog" aria-hidden="true"></span> &nbsp; Customize
			</button>
			<button type="button" class="btn btn-default btn-sm btn-toggle-editor" data-toggle="button" autocomplete="off">
				Toggle Editor
			</button>
			<button type="button" class="btn btn-default btn-sm btn-auto-height" data-toggle="button" autocomplete="off">
				Auto Height
			</button>
		</div>
	</div>
	<div class="col-sm-9 col-md-10" id="sourceCode">
		<div id="editor"></div>
		<textarea id="plain-textarea" class="form-control" style="display:none;" name="sourceCode"></textarea>
		<p>
			<span class="gray">* at most 512 KiB</span><br>
			<span class="gray">* Your source code will be saved as Main.<i>extension</i>.</span>
		</p>
	</div>
	<input id="input-open-file" type="file" style="display:none;">
</div>


			<input type="hidden" name="csrf_token" value="3XEPBu3Qif2jSp&#43;T9OtcVOMAAt&#43;RHcLD3KHJ0BWVvAw=" />
			<div class="form-group">
				<label class="control-label col-sm-3 col-md-2"></label>
				<div class="col-sm-5">
					<button type="submit" class="btn btn-primary" id="submit">Submit</button>
				</div>
			</div>
		</form>
		
	</div>
</div>




		
			<hr>
			
			
			
<div class="a2a_kit a2a_kit_size_20 a2a_default_style pull-right" data-a2a-url="https://atcoder.jp/contests/abc350/tasks/abc350_g?lang=en" data-a2a-title="G - Mediator">
	<a class="a2a_button_facebook"></a>
	<a class="a2a_button_twitter"></a>
	
		<a class="a2a_button_telegram"></a>
	
	<a class="a2a_dd" href="https://www.addtoany.com/share"></a>
</div>

		
		<script async src="//static.addtoany.com/menu/page.js"></script>
		
	</div> 
	<hr>
</div> 

	<div class="container" style="margin-bottom: 80px;">
			<footer class="footer">
			
				<ul>
					<li><a href="/contests/abc350/rules">Rule</a></li>
					<li><a href="/contests/abc350/glossary">Glossary</a></li>
					
				</ul>
			
			<ul>
				<li><a href="/tos">Terms of service</a></li>
				<li><a href="/privacy">Privacy Policy</a></li>
				<li><a href="/personal">Information Protection Policy</a></li>
				<li><a href="/company">Company</a></li>
				<li><a href="/faq">FAQ</a></li>
				<li><a href="/contact">Contact</a></li>
				
			</ul>
			<div class="text-center">
					<small id="copyright">Copyright Since 2012 &copy;<a href="http://atcoder.co.jp">AtCoder Inc.</a> All rights reserved.</small>
			</div>
			</footer>
	</div>
	<p id="fixed-server-timer" class="contest-timer"></p>
	<div id="scroll-page-top" style="display:none;"><span class="glyphicon glyphicon-arrow-up" aria-hidden="true"></span> Page Top</div>

</body>
</html>


