ARC017-D ARCたんクッキー
2020/03/25
解けず
遅延Segment木, GCD

区間に対する定数を加える操作と，区間のGCDを求めるクエリ．
データ数，クエリ数とも <=1e5

定数を区間に加えるとGCDがどうなってしまうか不明なのでできなかった．
しかし，gcd(a, b, c, d) = gcd(a, b-a, c-b, d-c) であることを使うと，
各ノードに(a, gcd(b-a, c-b, d-c)) を持たせる遅延segment木で解ける．
(a, X) \oplus (p, Y) = (a, gcd(p-a, gcd(X, Y)))
で良い．pとaは隣接していないが，p-a と p-d を入れ替えても
等しくなることが示せる．

