東京海上日動2020-D Knapsack Queries on a tree
2020/06/13
解けず
半分全列挙, 木, ナップザック

深さKの2分木の各点に (val, weight) が指定されている．
以下のQ回のクエリに答える: (n, L) が与えられるので，根からノードnまでの
パス上の，重さL以下最大価値を求める．
K <= 18; Q,val,weight,L <= 1e5．時間制限3秒

深さ K/2 までの各点に対してナップザック問題を解いて，1e5までの
すべての重さに対する最大価値を表にしておく．
クエリが与えられたら，深さ K/2 + 1 から n までのノードのすべての
部分集合に対して，重さ w と価値 v を求め，事前計算した点における L-重さ
に対する価値 v' を見て v + v' を作る．これらの最大値がクエリの答．
事前計算の手間が 1e5 * 2^9，クエリの手間が 1e5 * 2^9 なので
ギリギリ間に合う．

